(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){e.classList.add("popup_open"),document.addEventListener("keyup",B)}function n(e){e.classList.remove("popup_open"),document.removeEventListener("keyup",B)}e.d({},{hR:()=>B,R$:()=>s,nq:()=>p,UO:()=>c});const o=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._buttonElement=this._form.querySelector(this._submitButtonSelector)}_showInputError(e,t){const n=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?this._disableSubmitButton():(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._inactiveButtonClass))}_disableSubmitButton(){this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}},i=document.querySelector(".profile__info-name"),r=document.querySelector(".profile__info-about-me"),s=document.querySelector(".popup__title"),l=(document.querySelector(".popup"),document.querySelector(".popup_type_edit")),a=document.querySelector(".popup_type_add"),c=document.querySelector(".popup_type_preview"),u=document.querySelector(".edit-form"),_=a.querySelector(".edit-form"),d=document.querySelector(".elements__container"),p=document.querySelector(".popup__preview-image"),m=Array.from(document.querySelectorAll(".popup")),h=document.querySelector(".button_location_info"),y=l.querySelector(".button_location_close"),v=a.querySelector(".button_location_close"),S=c.querySelector(".button_location_close"),b=document.querySelector(".button_location_add-photo"),E=(_.querySelector(".button_location_submit"),document.querySelector(".edit-form__input_location_name")),L=document.querySelector(".edit-form__input_location_about-me"),q=document.querySelector(".edit-form__input_type_title"),f=document.querySelector(".edit-form__input_type_link"),k={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},g=new o(k,u),C=new o(k,_);g.enableValidation(),C.enableValidation();const w=(e,n)=>{const o=new class{constructor(e,t){this._name=e.name,this._link=e.link,this._cardSelector=t}_setEventListeners(){this._element.querySelector(".button_location_like").addEventListener("click",(e=>{this._handleLikeIcon(e)})),this._element.querySelector(".button_location_trash").addEventListener("click",(e=>{this._handleDeleteCard(e)})),this._element.querySelector(".elements__card-image").addEventListener("click",(()=>{this._handlePreviewPicture()}))}_handleLikeIcon(e){e.target.classList.toggle("button_location_like-active")}_handleDeleteCard(e){e.target.closest(".elements__card").remove()}_handlePreviewPicture(){p.src=this._link,p.alt=this._name,s.textContent=this._name,t(c)}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".elements__card").cloneNode(!0)}getView(){this._element=this._getTemplate();const e=this._element.querySelector(".elements__card-image");return e.alt=this._name,e.src=this._link,this._element.querySelector(".elements__card-title").textContent=this._name,this._setEventListeners(),this._element}}(e,"#card-template");n.prepend(o.getView())};function B(e){"Escape"===e.key&&n(document.querySelector(".popup_open"))}[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}].forEach((e=>{w(e,d)})),m.forEach((e=>{e.addEventListener("click",(e=>{n(e.target)}))})),h.addEventListener("click",(()=>t(l))),y.addEventListener("click",(()=>n(l))),b.addEventListener("click",(()=>{C.resetValidation(),t(a)})),v.addEventListener("click",(()=>n(a))),S.addEventListener("click",(()=>n(c))),u.addEventListener("submit",(function(e){e.preventDefault(),i.textContent=E.value,r.textContent=L.value,n(l)})),_.addEventListener("submit",(function(e){e.preventDefault();const t={};t.name=q.value,t.link=f.value,w(t,d),n(a),_.reset()}))})();